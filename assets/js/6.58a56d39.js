(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{90:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"船新版本的javascript（一）：-optional-chaining-和-nullish-coalescing-operator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#船新版本的javascript（一）：-optional-chaining-和-nullish-coalescing-operator","aria-hidden":"true"}},[t._v("#")]),t._v(" 船新版本的JavaScript（一）："),s("code",[t._v("?.")]),t._v("(Optional Chaining) 和 "),s("code",[t._v("??")]),t._v("(Nullish Coalescing Operator)")]),s("p",[s("s",[t._v("大扎好，我系Iron。Babel 7，介四里没有挽过的船新版本，挤需体验三番钟，里造会干我一样，爱上这门语言")])]),s("h2",{attrs:{id:"可选链调用-optional-chaining"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可选链调用-optional-chaining","aria-hidden":"true"}},[t._v("#")]),s("code",[t._v("?.")]),t._v("可选链调用(Optional Chaining)")]),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景","aria-hidden":"true"}},[t._v("#")]),t._v(" 背景")]),s("p",[t._v("我们经常会遇到这样的情况，我们要去读取一个嵌套的对象中的某个深层的值，但我们必须检验我们访问的“路径”的每个节点是否为"),s("code",[t._v("null")]),t._v("或"),s("code",[t._v("undefined")]),t._v("，这种情况下我们一般是这么来的")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" street "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" user"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" user"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("street"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("如果是foo.bar.biz.bah这样的路径，那么我们得这么写")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bah "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("biz "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("biz"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bah\n")])]),s("p",[t._v("这个提案出现就是为了避免使用 "),s("code",[t._v("&&")]),t._v(" 或者"),s("code",[t._v("||")]),t._v('并不断重复“访问路径"中的属性名（就是上面不断出现的'),s("code",[t._v("foo")]),t._v(", "),s("code",[t._v("bar")]),t._v(", "),s("code",[t._v("biz")]),t._v("）")]),s("h3",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 语法")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// \b带空指针检查地取静态属性")]),t._v("\na"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 等效于")]),t._v("\na "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b\n"),s("span",{attrs:{class:"token comment"}},[t._v("// NOTE: null == undefined 会返回ture")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 取动态的属性")]),t._v("\na"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 将被转化为")]),t._v("\na "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 检查一个函数的引用是否为空，非空则调用它，否则直接返回undefined")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 当然这也可能会抛出异常，显然\b会出现func\b既不是函数也不是null也不是undefind的情况")]),t._v("\nfunc"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\nfunc "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("func")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("h4",{attrs:{id:"短路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#短路","aria-hidden":"true"}},[t._v("#")]),t._v(" 短路")]),s("p",[s("code",[t._v("?.")]),t._v("运算符具有短路的特性。"),s("code",[t._v("?.")]),t._v("左边的值为"),s("code",[t._v("null")]),t._v("或"),s("code",[t._v("undefined")]),t._v("，那么它右边的表达式将不会执行")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("a"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 等效于")]),t._v("\na "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 当a为null或者undefined时++x不会执行，x不变")]),t._v("\n")])]),s("p",[t._v("当短路发生时，不仅短路当前"),s("code",[t._v("?.")]),t._v("的右值，"),s("code",[t._v("?.")]),t._v("之后的所有表达式都会被短路掉")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("a"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("c")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 后面的`b.c(++x).d`被短路，++x不会被执行，\b上面这段代码等效于")]),t._v("\na "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("c")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("x"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d\n")])]),s("h4",{attrs:{id:"边界：括号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#边界：括号","aria-hidden":"true"}},[t._v("#")]),t._v(" 边界：括号")]),s("p",[t._v("括号会为"),s("code",[t._v("?.")]),t._v("的短路行为定一个边界，括号外的\b调用将不会被短路")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c\n"),s("span",{attrs:{class:"token comment"}},[t._v("// `.c`\b在a为null或者undefined的时候也会被调用，因此可能会引发空指针异常")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c\n")])]),s("h4",{attrs:{id:"delete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete","aria-hidden":"true"}},[t._v("#")]),t._v(" delete")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" a"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 我们会得到下面的")]),t._v("\na "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" undefined "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 不过delete删掉一个null或者undefined也不会报错")]),t._v("\n")])]),s("h2",{attrs:{id:"（空值合并）-nullish-coalescing-operator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#（空值合并）-nullish-coalescing-operator","aria-hidden":"true"}},[t._v("#")]),s("code",[t._v("??")]),t._v("（空值合并）(Nullish Coalescing Operator)")]),s("h3",{attrs:{id:"背景-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 背景")]),s("p",[t._v("首先，我们先下个定义，一个"),s("code",[t._v("Nullish")]),t._v("的值，即这个值为"),s("code",[t._v("null")]),t._v("或"),s("code",[t._v("undefined")]),t._v("，一个"),s("code",[t._v("falsy")]),t._v("的值，即在Boolean上下文中可被认定为"),s("code",[t._v("false")]),t._v("\n的值，他们是（"),s("code",[t._v("''")]),t._v(", "),s("code",[t._v("false")]),t._v(", "),s("code",[t._v("0")]),t._v(", "),s("code",[t._v("null")]),t._v(", "),s("code",[t._v("undefined")]),t._v(", "),s("code",[t._v("NaN")]),t._v(", "),s("code",[t._v("document.all")]),t._v("）\n当我们用上面所说的"),s("code",[t._v("?.")]),t._v("(optional chaining operator)运算符去读取属性有时会返回"),s("code",[t._v("null")]),t._v("或"),s("code",[t._v("undefined")]),t._v("，这个时候我们可能需要一个默认值\n举个例子\n假设我们有这么一个对象")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  settings"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    nullValue"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    height"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("400")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    animationDuration"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("0")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    headerText"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("''")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    showSplashScreen"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("似乎我们可以用"),s("code",[t._v("||")]),t._v("运算符给"),s("code",[t._v("?.")]),t._v("(optional training operator)的结果指定一个默认值")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" undefinedValue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("undefinedValue "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'some other default'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 结果是'some other result'")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nullValue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nullValue "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'some other default'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 结果也是'some other result'")]),t._v("\n")])]),s("p",[t._v("上面两种情况可以按照我们想象的方式工作\n但下面三种情况，"),s("code",[t._v("?.")]),t._v("\b运算符的结果为"),s("code",[t._v("falsy")]),t._v("但不为"),s("code",[t._v("nullish")]),t._v("，但最后还是可能返回\b"),s("code",[t._v("||")]),t._v("的右值")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerText "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headerText "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Hello, world!'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 当\b`||`左值为''（空字符串）时，表达式结果：'Hello, world'")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" animationDuration "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("animationDuration "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("300")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 左值为0时，表达式结果: 300")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" showSplashScreen "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showSplashScreen "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 左值为false时，表达式结果为true")]),t._v("\n")])]),s("p",[t._v("因此使用"),s("code",[t._v("||")]),t._v("给"),s("code",[t._v("?.")]),t._v("的结果指定默认值时，当左值为"),s("code",[t._v("falsy")]),t._v("且不是"),s("code",[t._v("nullish")]),t._v(","),s("code",[t._v("||")]),t._v("运算依旧会返回右边的默认值，这与我们所希望的，只有当\b"),s("code",[t._v("?.")]),t._v("结果为"),s("code",[t._v("nullish")]),t._v("时才返回一个默认值的意愿是相左的。\n当然我们可以直接用三目运算符避免这种情况。"),s("code",[t._v("??")]),t._v("运算符的出现是为了更好地处理左值为非"),s("code",[t._v("nullish")]),t._v("但为"),s("code",[t._v("falsy")]),t._v("时需要返回左值的情况")]),s("h3",{attrs:{id:"语法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 语法")]),s("p",[t._v("这个运算符的语法非常简单\n以上面的例子为例，"),s("code",[t._v("??")]),t._v("运算符的左值为null或undefined时返回右值，否则返回左值")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" undefinedValue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("undefinedValue "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'some other default'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// some other default'")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nullValue "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nullValue "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'some other default'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 'some other default'")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("// 下面三个左值为非null且非undefined，返回左值")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" headerText "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headerText "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Hello, world!'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// : ''")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" animationDuration "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("animationDuration "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("300")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("//  0")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" showSplashScreen "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("settings"),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("showSplashScreen "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])]),s("h2",{attrs:{id:"如何在代码中用上-和"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何在代码中用上-和","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何在代码中用上"),s("code",[t._v("?.")]),t._v("和"),s("code",[t._v("??")])]),s("p",[t._v("babel已经实现了这两个语法，他们可以用babel7的插件来编译到兼容的语法上")]),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save-dev @babel/plugin-proposal-optional-chaining\nnpm install --save-dev @babel/plugin-proposal-nullish-coalescing-operator\n# \b用yarn装也无所谓\n")])]),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置")]),s("p",[t._v("在.babelrc里加上这么两句")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "plugins": ["@babel/plugin-proposal-nullish-coalescing-operator", "@babel/plugin-proposal-optional-chaining"]\n}\n')])]),s("p",[t._v("如果有webpack的话需要在webpack 中"),s("code",[t._v("babel-loader")]),t._v("的options中加上")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loader"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'babel-loader'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'@babel/plugin-proposal-nullish-coalescing-operator'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'@babel/plugin-proposal-optional-chaining'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("h3",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用")]),s("p",[t._v("最后在命令行里敲"),s("code",[t._v("webpack")]),t._v("或者"),s("code",[t._v("babel")]),t._v("\b就行了")]),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),s("p",[s("a",{attrs:{href:"https://babeljs.io/blog/2018/08/27/7.0.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel 7 release announcement")])]),s("p",[s("a",{attrs:{href:"https://github.com/tc39/proposal-optional-chaining",target:"_blank",rel:"noopener noreferrer"}},[t._v("TC39 optional chaining proposal")])]),s("p",[s("a",{attrs:{href:"https://github.com/tc39/proposal-nullish-coalescing",target:"_blank",rel:"noopener noreferrer"}},[t._v("TC39 nullish coalescing operator proposal")])]),s("p",[s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/plugin-proposal-optional-chaining")])]),s("p",[s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-plugin-proposal-nullish-coalescing-operator",target:"_blank",rel:"noopener noreferrer"}},[t._v(" babel/plugin-proposal-nullish-coalescing-operator")])])])}],!1,null,null,null);a.default=e.exports}}]);